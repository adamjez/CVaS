"use strict";function AlgorithmClient(n,t){var i=this;this.algorithmEndpoint=n;this.createRequestBodyCallback=t;zip.workerScriptsPath="/lib/zipjs/WebContent/";var r=function(n,t,i){$("#body-request-message").html("<p>"+n+" "+t+"<\/p><p>BODY: "+i+"<\/p>");$("#request-message").show();$("#request-message").alert();$("#request-message").delay(4e3).slideUp(500,0)},u=function(n,t,i,r,u,f){(f.append("<p>RunId: "+n+"<\/p>"),f.append("<p>Status: "+t+"<\/p>"),t!=="notFinished")&&(i!==undefined&&i.trim()!==""&&f.append("<p>StdOut: "+i+"<\/p>"),r!==undefined&&r.trim()!==""&&f.append("<p>StdErr: "+r+"<\/p>"),u!==undefined)&&(f.append('<p>Zip: <a href= "'+u+'"> '+u+"<\/a><\/p>"),zip.createReader(new zip.HttpReader(u),function(n){n.getEntries(function(t){var i=t[0];i.getData(new zip.BlobWriter("image/jpg"),function(t){n.close();f.prepend('<img class="result-preview" src="'+URL.createObjectURL(t)+'"/>')})})},onerror))},f=function(n,t,f){var o=$("li[qq-file-id='"+f+"']"),s=o.find(".loader"),h,e;s.show();h=i.createRequestBodyCallback(t);e=JSON.stringify(h);r("POST",i.algorithmEndpoint,e);$.ajax({type:"POST",url:i.algorithmEndpoint,data:e,timeout:0,headers:{accept:"application/json"},contentType:"application/json",success:function(n){s.hide();u(n.runId,n.status,n.stdOut,n.stdErr,n.zip,o.find("div.result"))}})};$("#fine-uploader-gallery").fineUploader({template:"qq-template-gallery",request:{endpoint:"/files"},deleteFile:{enabled:!1,endpoint:"/files"},thumbnails:{placeholders:{waitingPath:"/lib/fine-uploader/dist/placeholders/waiting-generic.png",notAvailablePath:"/lib/fine-uploader/dist/placeholders/not_available-generic.png"}},validation:{allowedExtensions:["jpeg","jpg","gif","png"]},callbacks:{onComplete:function(n,t,i){i.ids.forEach(function(i){f(t,i,n)})}}})}